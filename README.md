# Тестовое задание для YOTA
## Задание
Сделать простую реализацию сервиса тарификации услуг сотовой связи (минут звонков и гигабайт интернета).

Сервис должен позволять:

 * Начислять пакеты минут и гигабайтов, имеющих время жизни
 * Расходовать (вычитать) минуты и гигабайты из пакета
 * Получать количество доступных минут и гигабайт
 * Активировать и блокировать сим-карты

Технологии для использования:

 * Spring Boot
 * Gradle
 * Любая встраиваемая СУБД
 * Любые другие библиотеки
 
Код должен быть опубликован на github и содержать всё необходимое для работы с приложением описание.

Решение должно быть реализовано в виде самостоятельного jar файла и не должно требовать каких-либо других зависимостей для запуска.

Ожидается высокая степень покрытия тестами.

## Заметки
1. При старте приложения база наполняется тестовыми данными

## Запуск
1. Скомпилировать проект (включить Annotation Processor для Lombok и поставить Lombok Plugin для IDEA)
2. Запустить из IDE или с помощью java -jar app.jar

## Использование 
1. WebUI для встроенной базы данных: http://localhost:8080/h2-console/
1.1 JDBC Url: jdbc:h2:mem:test
1.2. User: sa
1.3. Password: 
2. API доступно на порту 8080

| Метод   | Тело запроса            | Адрес                                                       | Описание                          |
| --------| ----------------------- | ----------------------------------------------------------- | --------------------------------  |
|  GET    |     пусто               |`localhost:8080/api/v1/sim-card/${номер_телефона}/`                | Получить сим-карту (обьект)       |
|  GET    |     пусто               |`localhost:8080/api/v1/sim-card/${номер_телефона}/status`          | Статус сим-карты                  |
|  PUT    |     {"value": <true/false>}    |`localhost:8080/api/v1/sim-card/${номер_телефона}/status`   | Обновить статус сим-карты         |
|  GET    |     пусто               |`localhost:8080/api/v1/sim-card/${номер_телефона}/minutes/total`   | Количество активных минут         |
|  GET    |     пусто               |`localhost:8080/api/v1/sim-card/${номер_телефона}/minutes/packages`| Количество активных пакетов минут |
|  POST   |{"basePackageId": "<id нужного пакета>","addition": <Количество минут>,"daysToLive": "<Время жизни (дней)>"}|`localhost:8080/api/v1/sim-card/${номер_телефона}/minutes`         | Добавить пакет минут к сим-карте  |
|  GET    |     пусто               |`localhost:8080/api/v1/packages-of-minutes/${id_пакета}`            | Получить базовый пакет минут (обьект)     |
|  GET    |     пусто               |`localhost:8080/api/v1/packages-of-minutes/`            | Получить все базовые пакеты минут (обьект)     |
|  POST   |{"name":"<имя_пакета>","type":"<FREE_ROAMING \ FAVORITE_NUMBER>"} | `localhost:8080/api/v1/packages-of-minutes/`                   | Сохранить в базу базовый пакет минут      |
|  PUT    |{"value": <количество минут (отр или пол)>} |`localhost:8080/api/v1/packages-of-minutes/details/${details_id}`                    | Сохранить в базу базовый пакет минут      |

## Контакты
    muchnik.ak@gmail.com